(this["webpackJsonplolamarket-react-project"]=this["webpackJsonplolamarket-react-project"]||[]).push([[0],{14:function(e,t,a){},30:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a(0),s=a.n(r),o=a(21),n=a.n(o),i=(a(30),a(13)),l=a(7),d=a(8),p=a(10),h=a(9),u=(a(14),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e={backgroundColor:"rgb("+this.props.market.color+")"};return Object(c.jsxs)("div",{className:"headerIn",style:e,children:[Object(c.jsx)("img",{alt:"icono de la tienda",src:this.props.market.icon}),Object(c.jsxs)("div",{className:"shop",children:[Object(c.jsx)("span",{children:this.props.market.name}),Object(c.jsxs)("small",{children:[" Comprando en ",this.props.postalCode]})]})]})}}]),a}(s.a.Component)),m=a(16),j=a.p+"static/media/ic_checked.c09fabdb.svg",y=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"renderCheck",value:function(){if(!0===this.props.item.checked)return Object(c.jsx)("img",{className:"checked",src:j,alt:"check"})}},{key:"render",value:function(){return Object(c.jsx)(m.a,{to:"/tienda/".concat(this.props.marketid,"/").concat(this.props.categoryid,"/").concat(this.props.item.id),children:Object(c.jsxs)("li",{className:"categoryListItem",children:[Object(c.jsx)("img",{className:"item-icon",src:this.props.item.icon,alt:"icono del producto"}),this.props.item.name," ",this.renderCheck()]},this.props.item.id)})}}]),a}(s.a.Component),g=a(23),b=a.n(g),k=a.p+"static/media/eye.30acd8dd.png",f=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var c=arguments.length,r=new Array(c),s=0;s<c;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).selectAllItem={id:-1,name:"Ver toda la secci\xf3n",icon:k,checked:!1},e}return Object(d.a)(a,[{key:"renderCategoryItemArray",value:function(){var e=this;return this.props.category.categories.map((function(t){return Object(c.jsx)(y,{item:t,marketid:e.props.marketid,categoryid:e.props.category.id,selectedSubCategory:e.props.selectedSubCategory},t.id)}))}},{key:"render",value:function(){var e=!1;if(null!=this.props.selectedCategory&&this.props.category.id==this.props.selectedCategory)if(e=!0,null!=this.props.selectedSubCategory&&-1==this.props.selectedSubCategory){this.selectAllItem.checked=!this.selectAllItem.checked;var t,a=Object(i.a)(this.props.category.categories);try{for(a.s();!(t=a.n()).done;){t.value.checked=this.selectAllItem.checked}}catch(h){a.e(h)}finally{a.f()}}else if(null!=this.props.selectedSubCategory&&-1!=this.props.selectedSubCategory){var r,s=Object(i.a)(this.props.category.categories);try{for(s.s();!(r=s.n()).done;){var o=r.value;o.id==this.props.selectedSubCategory&&(null==o.checked||!1===o.checked?o.checked=!0:o.checked=!1)}}catch(h){s.e(h)}finally{s.f()}var n,l=!0,d=Object(i.a)(this.props.category.categories);try{for(d.s();!(n=d.n()).done;){var p=n.value;null!=p.checked&&0!=p.checked||(l=!1)}}catch(h){d.e(h)}finally{d.f()}this.selectAllItem.checked=l}return Object(c.jsxs)("li",{className:"category",children:[Object(c.jsx)(m.a,{to:"/tienda/".concat(this.props.marketid,"/").concat(this.props.category.id),children:Object(c.jsxs)("div",{children:[Object(c.jsx)("img",{className:"icon",src:this.props.icon,alt:"icono del producto"}),this.props.category.name]})}),Object(c.jsx)("ul",{className:"categoryList",children:Object(c.jsxs)(b.a,{className:"collapsible",open:e,children:[Object(c.jsx)(y,{item:this.selectAllItem,marketid:this.props.marketid,categoryid:this.props.category.id,selectedSubCategory:this.props.selectedSubCategory},this.selectAllItem.id),this.renderCategoryItemArray()]})})]},this.props.category.id)}}]),a}(s.a.Component),O=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"renderCategoryArray",value:function(){var e=this;return this.props.catalogue.map((function(t){return Object(c.jsx)(f,{category:t,icon:t.icon,marketid:e.props.marketId,selectedCategory:e.props.categoryid,selectedSubCategory:e.props.subcategoryid},t.id)}))}},{key:"render",value:function(){return Object(c.jsx)("ul",{className:"catalogueList",children:this.renderCategoryArray()})}}]),a}(s.a.Component),v=a(2),C=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).renderCatalogue=function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)(u,{market:r.state.market,postalCode:r.state.postalCode}),Object(c.jsx)("div",{className:"catalogue",children:Object(c.jsx)(O,{catalogue:r.state.catalogue,marketId:e.match.params.marketid,categoryid:e.match.params.category,subcategoryid:e.match.params.subcategory})})]})},r.state={token:"",postalCode:28010,markets:[],market:{name:"tienda"},company_id:50,catalogue:[],category_id:0,items:[]},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getTokenFromApi()}},{key:"getTokenFromApi",value:function(e){var t=this;fetch("https://api.comprea.com/v7/user/session").then((function(e){return e.json()})).then((function(e){t.setState({token:e.token}),t.getCategories(e.token),t.getPostalCode(e.token)}))}},{key:"getPostalCode",value:function(e){var t=this;fetch("https://api.comprea.com/user/postalcode?token=".concat(e,"&postalcode=").concat(this.state.postalCode)).then((function(e){return e.json()})).then((function(e){t.setState({markets:e.markets});var a,c=Object(i.a)(e.markets);try{for(c.s();!(a=c.n()).done;){var r=a.value;r.id==t.state.company_id&&t.setState({market:r})}}catch(s){c.e(s)}finally{c.f()}}))}},{key:"getCategories",value:function(e){var t=this;fetch("https://api.comprea.com/v7/company/categories?token=".concat(e,"&company_id=").concat(this.state.company_id)).then((function(e){return e.json()})).then((function(e){t.setState({catalogue:e.categories})}))}},{key:"getItemsFromCategories",value:function(){var e=this;fetch("https://api.comprea.com/v7/company/items?token=".concat(this.state.token,"&company_id=").concat(this.state.company_id,"&category_id=").concat(this.state.category_id)).then((function(e){return e.json()})).then((function(t){e.setState({items:t.items})}))}},{key:"render",value:function(){return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(v.Redirect,{from:"/",to:"/tienda/50"}),Object(c.jsxs)(v.Switch,{children:[Object(c.jsx)(v.Route,{exact:!0,path:"/tienda/:marketid",render:this.renderCatalogue}),Object(c.jsx)(v.Route,{exact:!0,path:"/tienda/:marketid/:category",render:this.renderCatalogue}),Object(c.jsx)(v.Route,{exact:!0,path:"/tienda/:marketid/:category/:subcategory",render:this.renderCatalogue})]})]})}}]),a}(s.a.Component),x=a(24);n.a.render(Object(c.jsx)(x.HashRouter,{children:Object(c.jsx)(C,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.01e157ac.chunk.js.map